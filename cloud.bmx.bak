Type Cloud
  Field x#,y#,height#, rotation

  Method Update()
    x:+1
    y:+0.1
    If x>WorldSize x=-WorldSize
    If x<-WorldSize x=WorldSize
    If y>WorldSize y=-WorldSize
    If y<-WorldSize y=WorldSize
  EndMethod

  Method DrawBody()
    Local dx#,dy#
    dx=height/2.0
    dy=height
    SetBlend LIGHTBLEND
    SetAlpha 1
    SetScale 2.4,2.4
    SetRotation rotation
    SetColor 255,255,255
    DrawImage media_cloud,(MapPosition_X+dx-x) + C_ScreenMidX,(MapPosition_Y+dy-y) + C_ScreenMidY
  EndMethod

  Method DrawShadow()
    SetBlend ALPHABLEND
    SetColor 0,0,0
    SetAlpha 0.2
    SetScale 4, 4
    SetRotation rotation
    DrawImage media_cloud,(MapPosition_X-x) + C_ScreenMidX,(MapPosition_Y-y) + C_ScreenMidY
  EndMethod

  Function Create:Cloud( x#, y# )
    Local c:Cloud = New Cloud
    c.x= x
    c.y= y
    c.rotation = Rnd(360)
    c.height = 75
    CloudList.AddLast c
    Return c
  EndFunction
EndType

